# 参数对比与最终配置

## 横版源码对比

### 11.zip (-PDF--1.1.0)
```python
if area < 100:
    continue
if w < 10 and h < 10:
    continue
```

### 2222.zip (-PDF--1.0.0)
```python
if area < 100:
    continue
if w < 10 and h < 10:
    continue
```

### -PDF--1.1.1.zip
```python
if area < 100:
    continue
if w < 10 and h < 10:
    continue
```

**结论**：所有横版源码的参数都一样。

## 问题分析

"一"、"三"这样的扁字在300 DPI下：
- 假设字高30像素，字宽80像素
- 面积 = 30 × 80 = 2400（远大于100，应该能保留）

但如果形态学处理后字块变小，或者DPI不同，面积可能小于100。

## 最终配置

### 横版参数（已修改）
```python
# src/segmenter.py _extract_blocks()
if area < 50:  # 降低到50以保留"一"、"三"
    continue
if w < 5 and h < 5:
    continue
```

### 竖版参数（保持不变）
```python
# src/segmenter.py _extract_blocks_vertical()
if area < 50:
    continue
if w < 5 and h < 5:
    continue
```

## 测试结果

- 字块数量：4463个（比之前的4028个多了435个）
- 说明：降低阈值后提取了更多小字块

## 建议

如果仍然缺少"一"、"三"，可能的原因：
1. 形态学处理将它们连接到其他字上
2. 被判断为噪点过滤掉
3. DPI设置导致字块太小

可以进一步降低阈值到30或20，但要注意可能会引入更多噪点。
